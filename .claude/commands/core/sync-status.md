---
description: 進捗確認→Plans.md更新→次アクション提案（状況把握の起点）
description-en: Check progress → update Plans.md → suggest next action
---

# /sync-status - 状況把握・Plans.md同期・次アクション提案

**現在の実装状況を確認し、Plans.md との差分を検出・更新した上で、次にやるべきことを提案します。**

作業の区切りや「今どこまで進んだっけ？」と思った時に実行してください。

## バイブコーダー向け（こう言えばOK）

- 「**今どこまで進んだ？**」→ このコマンド
- 「**次に何をやればいい？**」→ 状況を整理して次のアクションを提案します
- 「**Plans.md と実際の進捗が合ってるか確認して**」→ 差分を検出して更新します

## できること（成果物）

1. **進捗確認**: 実装状況とPlans.mdの整合性をチェック
2. **差分更新**: Plans.md のマーカーを実態に合わせて更新
3. **次アクション提案**: 優先度を考慮して次にやるべきことを提示

---

## 実行フロー

### Step 1: 現状の収集

```bash
# Plans.md の現在のタスク状態
cat Plans.md

# Git の変更状況（実際に何が変わったか）
git status
git diff --stat HEAD~3  # 直近3コミットの変更

# 最近のコミット履歴
git log --oneline -10
```

### Step 2: 実装状況と Plans.md の差分検出

以下を確認：

| チェック項目 | 検出方法 |
|-------------|---------|
| 完了しているのに `cc:WIP` のまま | コミット履歴 vs マーカー |
| 着手済みなのに `cc:TODO` のまま | 変更ファイル vs マーカー |
| Plans.md にないタスクを実装済み | コミットメッセージ vs タスク一覧 |
| `cc:完了` だが未コミット | git status vs マーカー |

### Step 3: Plans.md の更新（差分があれば）

差分を検出したら、以下のように更新を提案・実行：

> 📝 **Plans.md の更新が必要です**
>
> | タスク | 現在 | 更新後 | 理由 |
> |-------|------|--------|------|
> | 〇〇の実装 | `cc:WIP` | `cc:完了` | コミット済み |
> | △△の追加 | `cc:TODO` | `cc:WIP` | 変更中のファイルあり |
>
> **更新しますか？** （はい / いいえ）

「はい」の場合は Plans.md を更新。

### Step 4: 進捗サマリーの出力

```markdown
## 📊 進捗サマリー

**更新日時**: {{YYYY-MM-DD HH:MM}}
**ブランチ**: {{現在のブランチ}}

---

### タスク状況

| ステータス | 件数 |
|-----------|------|
| 🔴 未着手 (`cc:TODO`) | {{件数}} |
| 🟡 作業中 (`cc:WIP`) | {{件数}} |
| 🟢 完了 (`cc:完了`) | {{件数}} |
| ✅ 確認済 (`pm:確認済`) | {{件数}} |
| ⏳ 依頼中 (`pm:依頼中`) | {{件数}} |
| 🚫 ブロック (`blocked`) | {{件数}} |

**進捗率**: {{完了 + 確認済}} / {{全タスク数}} ({{パーセント}}%)
```

### Step 5: 次アクションの提案

状況に応じて最適な次のアクションを提案：

> 🎯 **次にやるべきこと**
>
> **優先度1**: {{最優先タスク}}
> - 理由: {{依頼中 / ブロック解消 / 依存関係など}}
>
> **優先度2**: {{次点タスク}}
>
> ---
>
> **推奨コマンド**:
> - `/work` - 次のタスクに着手
> - `/handoff-to-pm-claude` - PM に完了報告（完了タスクがある場合）
> - `/harness-review` - レビュー依頼（一区切りついた場合）

---

## 異常検知

以下の状況を検知した場合は警告：

| 状況 | 警告 |
|------|------|
| `cc:WIP` が複数存在 | ⚠️ 同時に複数タスクを作業中 |
| `blocked` が長期間放置 | ⚠️ ブロック解消を優先 |
| `pm:依頼中` が未処理 | ⚠️ PM からの依頼を先に処理 |
| Plans.md と実装の乖離大 | ⚠️ タスク管理が追いついていない |

---

## 注意事項

- **更新前に確認**: Plans.md を更新する前に差分を表示して確認を求める
- **コミット履歴を参照**: 実際の作業内容はコミット履歴から判断
- **次アクションは具体的に**: 「何をすればいいか」を明確に提示

---

## ⚡ 並列実行の判断ポイント

このコマンドでは**情報収集フェーズ**で並列実行が有効です。

### 並列実行すべき場合 ✅

| 処理 | 並列化 |
|------|--------|
| Plans.md の読み込み | ✅ 独立 |
| git status の確認 | ✅ 独立 |
| git log の確認 | ✅ 独立 |
| git diff の確認 | ✅ 独立 |

**並列実行の効果**:
```
🚀 情報収集開始...
├── [Plans.md] 読み込み中... ⏳
├── [git status] 確認中... ⏳
├── [git log] 取得中... ⏳
└── [git diff] 分析中... ⏳

→ 4つの情報を同時に取得 → 時間短縮
```

### 直列実行される処理

以下は依存関係があるため直列実行：

```
情報収集（並列）→ 差分検出（直列）→ 更新提案（直列）→ 次アクション（直列）
```

### 自動判断

このコマンドは**自動的に最適化**されます：
- 情報収集: 並列実行
- 分析・更新: 直列実行（依存関係のため）
